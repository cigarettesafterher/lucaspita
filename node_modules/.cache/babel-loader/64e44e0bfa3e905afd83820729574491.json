{"ast":null,"code":"import { __extends } from \"tslib\";\nimport * as React from 'react';\nvar fontSize = 12;\nvar idCnt = 0;\n\nvar Gist = function (_super) {\n  __extends(Gist, _super);\n\n  function Gist() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.iframeNode = null;\n    _this.id = 'react-embed-gist-' + idCnt++;\n    return _this;\n  }\n\n  Gist.prototype.componentDidMount = function () {\n    this._updateIframeContent();\n  };\n\n  Gist.prototype.componentDidUpdate = function (prevProps, prevState) {\n    this._updateIframeContent();\n  };\n\n  Gist.prototype._defineUrl = function () {\n    var _a = this.props,\n        id = _a.id,\n        file = _a.file;\n    var fileArg = file ? \"?file=\".concat(file) : '';\n    return \"https://gist.github.com/\".concat(id, \".js\").concat(fileArg);\n  };\n\n  Gist.prototype._updateIframeContent = function () {\n    var iframe = this.iframeNode;\n    var doc = iframe.document;\n    if (iframe.contentDocument) doc = iframe.contentDocument;else if (iframe.contentWindow) doc = iframe.contentWindow.document;\n\n    var gistLink = this._defineUrl();\n\n    var gistScript = \"<script type=\\\"text/javascript\\\" src=\\\"\".concat(gistLink, \"\\\"></script>\");\n    var styles = \"<style>*{font-size:\".concat(fontSize, \"px;}</style>\");\n    var resizeScript = \"onload=\\\"parent.document.getElementById('\".concat(this.id, \"').style.height=document.body.scrollHeight + 'px'\\\"\");\n    var iframeHtml = \"<html><head><base target=\\\"_parent\\\">\".concat(styles, \"</head><body style=\\\"margin:0\\\" \").concat(resizeScript, \">\").concat(gistScript, \"</body></html>\");\n    doc.open();\n    doc.writeln(iframeHtml);\n    doc.close();\n  };\n\n  Gist.prototype.render = function () {\n    var _this = this;\n\n    var renderWrap = this.props.renderWrap;\n    return renderWrap(React.createElement(\"iframe\", {\n      id: this.id,\n      ref: function (n) {\n        _this.iframeNode = n;\n      },\n      width: \"100%\",\n      frameBorder: 0,\n      style: {\n        margin: \"0 0 -\".concat(fontSize, \"px\")\n      }\n    }));\n  };\n\n  return Gist;\n}(React.PureComponent);\n\nexport default Gist;","map":{"version":3,"mappings":";AAIA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AAGA,IAAMC,QAAQ,GAAG,EAAjB;AAQA,IAAIC,KAAK,GAAG,CAAZ;;AAEA;EAAmBC;;EAAnB;IAAA;;IACEC,mBAAuC,IAAvC;IACAA,WAAK,sBAAsBF,KAAK,EAAhC;;EAmDD;;EAjDCG;IACE,KAAKC,oBAAL;EACD,CAFD;;EAIAD,8CAAmBE,SAAnB,EAA8BC,SAA9B,EAAuC;IACrC,KAAKF,oBAAL;EACD,CAFD;;EAIAD;IACQ,SAAa,KAAKI,KAAlB;IAAA,IAACC,EAAE,QAAH;IAAA,IAAKC,IAAI,UAAT;IAEN,IAAMC,OAAO,GAAGD,IAAI,GAAG,gBAASA,IAAT,CAAH,GAAqB,EAAzC;IAEA,OAAO,kCAA2BD,EAA3B,EAA6B,KAA7B,EAA6BG,MAA7B,CAAmCD,OAAnC,CAAP;EACD,CAND;;EAQAP;IACE,IAAMS,MAAM,GAAG,KAAKC,UAApB;IAEA,IAAIC,GAAG,GAAIF,MAAc,CAACG,QAA1B;IACA,IAAIH,MAAM,CAACI,eAAX,EAA4BF,GAAG,GAAGF,MAAM,CAACI,eAAb,CAA5B,KACK,IAAIJ,MAAM,CAACK,aAAX,EAA0BH,GAAG,GAAGF,MAAM,CAACK,aAAP,CAAqBF,QAA3B;;IAE/B,IAAMG,QAAQ,GAAG,KAAKC,UAAL,EAAjB;;IACA,IAAMC,UAAU,GAAG,iDAAuCF,QAAvC,EAA+C,cAA/C,CAAnB;IACA,IAAMG,MAAM,GAAG,6BAAsBtB,QAAtB,EAA8B,cAA9B,CAAf;IACA,IAAMuB,YAAY,GAAG,mDAA2C,KAAKd,EAAhD,EAAkD,qDAAlD,CAArB;IACA,IAAMe,UAAU,GAAG,+CAAsCF,MAAtC,EAA4C,kCAA5C,EAA4CV,MAA5C,CAA6EW,YAA7E,EAAyF,GAAzF,EAAyFX,MAAzF,CAA6FS,UAA7F,EAAuG,gBAAvG,CAAnB;IAEAN,GAAG,CAACU,IAAJ;IACAV,GAAG,CAACW,OAAJ,CAAYF,UAAZ;IACAT,GAAG,CAACY,KAAJ;EACD,CAhBD;;EAkBAvB;IAAA;;IACS,cAAU,GAAI,KAAKI,KAAL,CAAUoB,UAAxB;IAEP,OAAOA,UAAU,CACf7B;MACEU,EAAE,EAAE,KAAKA,EADX;MAEEoB,GAAG,EAAE,UAACC,CAAD,EAAE;QACL3B,KAAI,CAACW,UAAL,GAAkBgB,CAAlB;MACD,CAJH;MAKEC,KAAK,EAAC,MALR;MAMEC,WAAW,EAAE,CANf;MAOEC,KAAK,EAAE;QAACC,MAAM,EAAE,eAAQlC,QAAR,EAAgB,IAAhB;MAAT;IAPT,EADe,CAAjB;EAWD,CAdD;;EAeF;AAAC,CArDD,CAAmBD,KAAK,CAACoC,aAAzB;;AAuDA,eAAe/B,IAAf","names":["React","fontSize","idCnt","__extends","_this","Gist","_updateIframeContent","prevProps","prevState","props","id","file","fileArg","concat","iframe","iframeNode","doc","document","contentDocument","contentWindow","gistLink","_defineUrl","gistScript","styles","resizeScript","iframeHtml","open","writeln","close","renderWrap","ref","n","width","frameBorder","style","margin","PureComponent"],"sources":["../../../src/blocks/gist/index.tsx"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}