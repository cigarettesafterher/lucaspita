{"ast":null,"code":"import { __assign } from \"tslib\";\nimport * as React from 'react';\nvar script = document.createElement('script');\nscript.type = 'text/javascript';\nscript.id = 'dropboxjs';\nvar DROPBOX_APP_KEY = window.DROPBOX_APP_KEY;\nif (DROPBOX_APP_KEY) script.setAttribute('data-app-key', DROPBOX_APP_KEY);\nscript.src = 'https://www.dropbox.com/static/api/2/dropins.js';\ndocument.body.append(script);\n\nvar DropboxUi = function (_a) {\n  var url = _a.url,\n      renderWrap = _a.renderWrap;\n  var ref = React.useRef();\n  React.useLayoutEffect(function () {\n    if (!ref.current) return;\n    var embed = Dropbox.embed({\n      link: url,\n      file: {\n        zoom: \"best\"\n      },\n      folder: {\n        view: \"list\",\n        headerSize: \"normal\"\n      }\n    }, ref.current);\n    return function () {\n      Dropbox.unmount(embed);\n    };\n  }, []);\n  return renderWrap(React.createElement(\"div\", {\n    ref: ref,\n    style: {\n      height: 500\n    }\n  }));\n};\n\nvar WithDropbox = function (props) {\n  var _a = React.useState(false),\n      ready = _a[0],\n      setReady = _a[1];\n\n  React.useEffect(function () {\n    var mounted = true;\n\n    var wait = function () {\n      if (!mounted) return;\n\n      if (typeof Dropbox !== 'undefined') {\n        setReady(true);\n        return;\n      }\n\n      setTimeout(wait, 100);\n    };\n\n    wait();\n    return function () {\n      mounted = false;\n    };\n  }, []);\n  if (!ready) return null;\n  return React.createElement(DropboxUi, __assign({}, props));\n};\n\nexport default WithDropbox;","map":{"version":3,"mappings":";AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AAGA,IAAMC,MAAM,GAAGC,QAAQ,CAACC,aAAT,CAAuB,QAAvB,CAAf;AACAF,MAAM,CAACG,IAAP,GAAc,iBAAd;AACAH,MAAM,CAACI,EAAP,GAAY,WAAZ;AACA,IAAMC,eAAe,GAAIC,MAAc,CAACD,eAAxC;AACA,IAAIA,eAAJ,EAAqBL,MAAM,CAACO,YAAP,CAAoB,cAApB,EAAoCF,eAApC;AACrBL,MAAM,CAACQ,GAAP,GAAa,iDAAb;AACAP,QAAQ,CAACQ,IAAT,CAAcC,MAAd,CAAqBV,MAArB;;AAIA,IAAMW,SAAS,GAAyB,UAACC,EAAD,EAAkB;MAAhBC,GAAG;MAAEC,UAAU;EACvD,IAAMC,GAAG,GAAGhB,KAAK,CAACiB,MAAN,EAAZ;EACAjB,KAAK,CAACkB,eAAN,CAAsB;IACpB,IAAI,CAACF,GAAG,CAACG,OAAT,EAAkB;IAClB,IAAMC,KAAK,GAAIC,OAAe,CAACD,KAAhB,CAAsB;MACnCE,IAAI,EAAER,GAD6B;MAEnCS,IAAI,EAAE;QACJC,IAAI,EAAE;MADF,CAF6B;MAKnCC,MAAM,EAAE;QACNC,IAAI,EAAE,MADA;QAENC,UAAU,EAAE;MAFN;IAL2B,CAAtB,EASZX,GAAG,CAACG,OATQ,CAAf;IAUA,OAAO;MACJE,OAAe,CAACO,OAAhB,CAAwBR,KAAxB;IACF,CAFD;EAGD,CAfD,EAeG,EAfH;EAiBA,OAAOL,UAAU,CACff;IAAKgB,GAAG,EAAEA,GAAV;IAAsBa,KAAK,EAAE;MAACC,MAAM,EAAE;IAAT;EAA7B,EADe,CAAjB;AAGD,CAtBD;;AAwBA,IAAMC,WAAW,GAAyB,UAACC,KAAD,EAAM;EACxC,SAAoBhC,KAAK,CAACiC,QAAN,CAAe,KAAf,CAApB;EAAA,IAACC,KAAK,QAAN;EAAA,IAAQC,QAAQ,QAAhB;;EACNnC,KAAK,CAACoC,SAAN,CAAgB;IACd,IAAIC,OAAO,GAAG,IAAd;;IACA,IAAMC,IAAI,GAAG;MACX,IAAI,CAACD,OAAL,EAAc;;MACd,IAAI,OAAOhB,OAAP,KAAmB,WAAvB,EAAoC;QAClCc,QAAQ,CAAC,IAAD,CAAR;QACA;MACD;;MACDI,UAAU,CAACD,IAAD,EAAO,GAAP,CAAV;IACD,CAPD;;IAQAA,IAAI;IACJ,OAAO;MACLD,OAAO,GAAG,KAAV;IACD,CAFD;EAGD,CAdD,EAcG,EAdH;EAgBA,IAAI,CAACH,KAAL,EAAY,OAAO,IAAP;EAEZ,OAAOlC,oBAACY,SAAD,EAAU4B,aAAKR,KAAL,CAAV,CAAP;AACD,CArBD;;AAuBA,eAAeD,WAAf","names":["React","script","document","createElement","type","id","DROPBOX_APP_KEY","window","setAttribute","src","body","append","DropboxUi","_a","url","renderWrap","ref","useRef","useLayoutEffect","current","embed","Dropbox","link","file","zoom","folder","view","headerSize","unmount","style","height","WithDropbox","props","useState","ready","setReady","useEffect","mounted","wait","setTimeout","__assign"],"sources":["../../../src/blocks/dropbox/index.tsx"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}