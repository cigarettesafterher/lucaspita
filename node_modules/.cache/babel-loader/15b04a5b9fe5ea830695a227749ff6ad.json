{"ast":null,"code":"import { __assign, __extends } from \"tslib\";\nimport * as React from 'react';\nvar blockStyle = {\n  width: 350,\n  overflow: 'hidden',\n  borderRadius: '6px',\n  display: 'block'\n};\nvar iframeStyle = {\n  width: '100%',\n  display: 'block',\n  overflow: 'hidden',\n  borderRadius: '8px'\n};\n\nvar Imgur = function (_super) {\n  __extends(Imgur, _super);\n\n  function Imgur() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.state = {\n      height: 0\n    };\n    _this.mounted = false;\n\n    _this.onMessage = function (_a) {\n      var data = _a.data;\n      if (!_this.mounted) return;\n      if (typeof data !== 'string') return;\n\n      try {\n        var json = JSON.parse(data);\n        if (json.message !== 'resize_imgur') return;\n        if (typeof json.href !== 'string') return;\n        if (json.href !== _this.src()) return;\n        if (typeof json.height !== 'number') return;\n\n        _this.setState({\n          height: json.height\n        });\n      } catch (_b) {}\n    };\n\n    return _this;\n  }\n\n  Imgur.prototype.componentDidMount = function () {\n    this.mounted = true;\n    window.addEventListener('message', this.onMessage);\n  };\n\n  Imgur.prototype.componentWillUnmount = function () {\n    this.mounted = false;\n    window.removeEventListener('message', this.onMessage);\n  };\n\n  Imgur.prototype.src = function () {\n    return \"https://imgur.com/a/\".concat(this.props.id, \"/embed?pub=true&w=340\");\n  };\n\n  Imgur.prototype.render = function () {\n    var state = this.state;\n    var height = state.height || 0;\n    return this.props.renderWrap(React.createElement(\"div\", {\n      style: __assign(__assign({}, blockStyle), {\n        border: height ? '1px solid #E5E9F2' : ''\n      })\n    }, React.createElement(\"iframe\", {\n      scrolling: \"no\",\n      frameBorder: \"0\",\n      src: this.src(),\n      style: __assign(__assign({}, iframeStyle), {\n        height: height\n      })\n    })));\n  };\n\n  return Imgur;\n}(React.Component);\n\nexport default Imgur;","map":{"version":3,"mappings":";AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AAGA,IAAMC,UAAU,GAAG;EACjBC,KAAK,EAAE,GADU;EAEjBC,QAAQ,EAAE,QAFO;EAGjBC,YAAY,EAAE,KAHG;EAIjBC,OAAO,EAAE;AAJQ,CAAnB;AAOA,IAAMC,WAAW,GAAG;EAClBJ,KAAK,EAAE,MADW;EAElBG,OAAO,EAAE,OAFS;EAGlBF,QAAQ,EAAE,QAHQ;EAIlBC,YAAY,EAAE;AAJI,CAApB;;AAWA;EAAoBG;;EAApB;IAAA;;IACEC,cAAoB;MAClBC,MAAM,EAAE;IADU,CAApB;IAGAD,gBAAU,KAAV;;IAaAA,kBAAY,UAACE,EAAD,EAAO;UAALC,IAAI;MAChB,IAAI,CAACH,KAAI,CAACI,OAAV,EAAmB;MACnB,IAAI,OAAOD,IAAP,KAAgB,QAApB,EAA8B;;MAC9B,IAAI;QACF,IAAME,IAAI,GAAGC,IAAI,CAACC,KAAL,CAAWJ,IAAX,CAAb;QACA,IAAIE,IAAI,CAACG,OAAL,KAAiB,cAArB,EAAqC;QACrC,IAAI,OAAOH,IAAI,CAACI,IAAZ,KAAqB,QAAzB,EAAmC;QACnC,IAAIJ,IAAI,CAACI,IAAL,KAAcT,KAAI,CAACU,GAAL,EAAlB,EAA8B;QAC9B,IAAI,OAAOL,IAAI,CAACJ,MAAZ,KAAuB,QAA3B,EAAqC;;QACrCD,KAAI,CAACW,QAAL,CAAc;UAACV,MAAM,EAAEI,IAAI,CAACJ;QAAd,CAAd;MACD,CAPD,CAOE,WAAM,CAAE;IACX,CAXD;;;EA2BD;;EAtCCW;IACE,KAAKR,OAAL,GAAe,IAAf;IACAS,MAAM,CAACC,gBAAP,CAAwB,SAAxB,EAAmC,KAAKC,SAAxC;EACD,CAHD;;EAKAH;IACE,KAAKR,OAAL,GAAe,KAAf;IACAS,MAAM,CAACG,mBAAP,CAA2B,SAA3B,EAAsC,KAAKD,SAA3C;EACD,CAHD;;EAmBAH;IACE,OAAO,8BAAuB,KAAKK,KAAL,CAAWC,EAAlC,EAAoC,uBAApC,CAAP;EACD,CAFD;;EAIAN;IACS,SAAK,GAAI,KAAIO,KAAb;IACP,IAAMlB,MAAM,GAAGkB,KAAK,CAAClB,MAAN,IAAgB,CAA/B;IAEA,OAAO,KAAKgB,KAAL,CAAWG,UAAX,CACL5B;MAAK6B,KAAK,wBAAM5B,UAAN,GAAgB;QAAE6B,MAAM,EAAErB,MAAM,GAAG,mBAAH,GAAyB;MAAzC,CAAhB;IAAV,GACET;MAAQ+B,SAAS,EAAC,IAAlB;MAAuBC,WAAW,EAAC,GAAnC;MAAuCd,GAAG,EAAE,KAAKA,GAAL,EAA5C;MAAwDW,KAAK,wBAAMvB,WAAN,GAAiB;QAAEG,MAAM;MAAR,CAAjB;IAA7D,EADF,CADK,CAAP;EAKD,CATD;;EAUF;AAAC,CA5CD,CAAoBT,KAAK,CAACiC,SAA1B;;AA8CA,eAAeb,KAAf","names":["React","blockStyle","width","overflow","borderRadius","display","iframeStyle","__extends","_this","height","_a","data","mounted","json","JSON","parse","message","href","src","setState","Imgur","window","addEventListener","onMessage","removeEventListener","props","id","state","renderWrap","style","border","scrolling","frameBorder","Component"],"sources":["../../../src/blocks/imgur/index.tsx"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}